(()=>{var e={};e.id=707,e.ids=[707],e.modules={7495:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=7495,e.exports=t},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},3749:(e,t,a)=>{"use strict";a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>v,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{GET:()=>l,POST:()=>_});var o=a(9303),n=a(8716),s=a(670),u=a(7070);let i=(0,a(785).createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL||"https://your-project.supabase.co",process.env.SUPABASE_SERVICE_KEY||process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"your-key"),c={dashboard_overview:{total_transactions:15420,total_revenue:2847592.5,avg_order_value:184.65,unique_customers:8932},regional_chart:{data:[{region_name:"NCR",txn_count:5234,total_revenue:1245632.3},{region_name:"CALABARZON",txn_count:3892,total_revenue:892341.75},{region_name:"Central Luzon",txn_count:2851,total_revenue:567890.25},{region_name:"Western Visayas",txn_count:1923,total_revenue:423567.8},{region_name:"Northern Mindanao",txn_count:1520,total_revenue:318160.4}]},brand_performance_chart:{data:[{brand_name:"Alaska Milk",brand_revenue:485672.3,item_count:1523},{brand_name:"Oishi",brand_revenue:398234.75,item_count:1287},{brand_name:"Del Monte",brand_revenue:327891.5,item_count:1094},{brand_name:"Nestle",brand_revenue:287654.2,item_count:956},{brand_name:"Coca-Cola",brand_revenue:198743.65,item_count:743}]},gender_silhouette_chart:{data:[{gender:"Male",count:4521,customer_count:2834,transaction_count:7892},{gender:"Female",count:4411,customer_count:2756,transaction_count:7628}]},top_categories_chart:{data:[{category:"Beverages",item_count:3254,category_revenue:624531.2},{category:"Snacks",item_count:2987,category_revenue:456789.3},{category:"Personal Care",item_count:2543,category_revenue:398456.7},{category:"Household",item_count:2198,category_revenue:345678.9},{category:"Dairy",item_count:1876,category_revenue:287654.5}]}};async function d(){try{let[e,t,a,r,o]=await Promise.allSettled([i.rpc("get_total_transactions"),i.rpc("validate_regional_data"),i.rpc("validate_brand_data"),i.rpc("validate_category_data"),i.rpc("validate_gender_data")]);if([e,t,a,r,o].some(e=>"fulfilled"===e.status&&e.value.data))return{dashboard_overview:{total_transactions:"fulfilled"===e.status&&e.value.data?.total_transactions||0,total_revenue:"fulfilled"===e.status&&e.value.data?.total_revenue||0,avg_order_value:"fulfilled"===e.status&&e.value.data?.avg_order_value||0,unique_customers:"fulfilled"===e.status&&e.value.data?.unique_customers||0},regional_chart:{data:"fulfilled"===t.status&&t.value.data||[]},brand_performance_chart:{data:"fulfilled"===a.status&&a.value.data||[]},top_categories_chart:{data:"fulfilled"===r.status&&r.value.data||[]},gender_silhouette_chart:{data:"fulfilled"===o.status&&o.value.data||[]},source:"supabase"}}catch(e){console.log("Supabase connection failed, using mock data:",e)}return{...c,source:"mock"}}async function l(e){try{let e=await d();return u.NextResponse.json({success:!0,data:e,timestamp:new Date().toISOString(),version:"3.3.0"})}catch(e){return console.error("Dashboard API error:",e),u.NextResponse.json({success:!1,error:"Failed to load dashboard data",data:c,source:"fallback",timestamp:new Date().toISOString(),version:"3.3.0"},{status:500})}}async function _(e){try{let{filters:t,timeframe:a}=await e.json(),r={...await d()};return t?.region&&(r.regional_chart.data=r.regional_chart.data.filter(e=>e.region_name.toLowerCase().includes(t.region.toLowerCase()))),t?.brand&&(r.brand_performance_chart.data=r.brand_performance_chart.data.filter(e=>e.brand_name.toLowerCase().includes(t.brand.toLowerCase()))),u.NextResponse.json({success:!0,data:r,filters:t,timestamp:new Date().toISOString(),version:"3.3.0"})}catch(e){return console.error("Dashboard filter API error:",e),u.NextResponse.json({success:!1,error:"Failed to filter dashboard data",timestamp:new Date().toISOString(),version:"3.3.0"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/dashboard/route",pathname:"/api/dashboard",filename:"route",bundlePath:"app/api/dashboard/route"},resolvedPagePath:"/Users/tbwa/Documents/GitHub/ai-analytics-platform/app/api/dashboard/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:v,staticGenerationAsyncStorage:m,serverHooks:g}=p,h="/api/dashboard/route";function f(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,958],()=>a(3749));module.exports=r})();